(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";window.commitchange={iframes:[],modalIframe:null};commitchange.openDonationModal=function(iframe,overlay){return function(event){overlay.className="commitchange-overlay commitchange-open";iframe.className="commitchange-iframe commitchange-open";commitchange.setParams(commitchange.getParamsFromButton(event.currentTarget),iframe);commitchange.open_iframe=iframe;commitchange.open_overlay=overlay}};commitchange.setParams=function(params,iframe){params.command="setDonationParams";params.sender="commitchange";iframe.contentWindow.postMessage(JSON.stringify(params),fullHost)};commitchange.hideDonation=function(){if(!commitchange.open_overlay||!commitchange.open_iframe)return;commitchange.open_overlay.className="commitchange-overlay commitchange-closed";commitchange.open_iframe.className="commitchange-iframe commitchange-closed";commitchange.open_overlay=undefined;commitchange.open_iframe=undefined};var fullHost="https://commitchange.com";commitchange.overlay=function(){var div=document.createElement("div");div.setAttribute("class","commitchange-closed commitchange-overlay");return div};commitchange.createIframe=function(source){var i=document.createElement("iframe");var url=document.location.href;i.setAttribute("class","commitchange-closed commitchange-iframe");i.src=source+"&origin="+url;return i};commitchange.getParamsFromButton=function(elem){var options={offsite:"t",type:elem.getAttribute("data-type"),custom_amounts:elem.getAttribute("data-custom-amounts")||elem.getAttribute("data-amounts"),custom_fields:elem.getAttribute("data-custom-fields"),campaign_id:elem.getAttribute("data-campaign-id"),gift_option_id:elem.getAttribute("data-gift-option-id"),redirect:elem.getAttribute("data-redirect"),designation:elem.getAttribute("data-designation"),multiple_designations:elem.getAttribute("data-multiple-designations"),hide_dedication:elem.getAttribute("data-hide-dedication"),designations_prompt:elem.getAttribute("data-designations-prompt"),single_amount:elem.getAttribute("data-single-amount")||elem.getAttribute("data-amount"),designation_desc:elem.getAttribute("data-designation-desc")||elem.getAttribute("data-description")};for(var key in options){if(!options[key])delete options[key]}return options};commitchange.appendMarkup=function(){if(commitchange.alreadyAppended)return;else commitchange.alreadyAppended=true;var script=document.getElementById("commitchange-donation-script")||document.getElementById("commitchange-script");var nonprofitID=script.getAttribute("data-npo-id");var baseSource=fullHost+"/nonprofits/"+nonprofitID+"/donate?offsite=t";var elems=document.querySelectorAll(".commitchange-donate");for(var i=0;i<elems.length;++i){var elem=elems[i];var source=baseSource;var options=commitchange.getParamsFromButton(elem);var params=[];for(var key in options){params.push(key+"="+options[key])}source+="&"+params.join("&");if(elem.hasAttribute("data-embedded")){source+="&mode=embedded";var iframe=commitchange.createIframe(source);elem.appendChild(iframe);iframe.setAttribute("class","commitchange-iframe-embedded");commitchange.iframes.push(iframe)}else{if(!elem.hasAttribute("data-custom")&&!elem.hasAttribute("data-custom-button")){var btn_iframe=document.createElement("iframe");var btn_src=fullHost+"/nonprofits/"+nonprofitID+"/btn";if(elem.hasAttribute("data-fixed")){btn_src+="?fixed=t"}btn_iframe.src=btn_src;btn_iframe.className="commitchange-btn-iframe";btn_iframe.setAttribute("scrolling","no");btn_iframe.setAttribute("seamless","seamless");elem.appendChild(btn_iframe);btn_iframe.onclick=commitchange.openDonationModal(_iframe,overlay)}var modal=document.createElement("div");modal.className="commitchange-modal";var overlay=commitchange.overlay();var _iframe=void 0;if(commitchange.modalIframe){_iframe=commitchange.modalIframe}else{_iframe=commitchange.createIframe(source);commitchange.iframes.push(_iframe);commitchange.modalIframe=_iframe}modal.appendChild(overlay);document.body.appendChild(_iframe);elem.parentNode.appendChild(modal);overlay.onclick=commitchange.hideDonation;elem.onclick=commitchange.openDonationModal(_iframe,overlay)}}};commitchange.loadStylesheet=function(){if(commitchange.alreadyStyled)return;else commitchange.alreadyStyled=true;var stylesheet=document.createElement("link");var host="https://s3-us-west-1.amazonaws.com";var path="/commitchange/manual/donate-button.v2.css";stylesheet.href=host+path;stylesheet.rel="stylesheet";stylesheet.type="text/css";document.getElementsByTagName("head")[0].appendChild(stylesheet)};if(window.addEventListener){window.addEventListener("message",function(e){if(e.data==="commitchange:close"){commitchange.hideDonation()}else if(e.data.match(/^commitchange:redirect/)){var matches=e.data.match(/^commitchange:redirect:(.+)$/);if(matches.length===2)window.location.href=matches[1]}})}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(event){commitchange.loadStylesheet();commitchange.appendMarkup()})}else if(window.jQuery){window.jQuery(document).ready(function(){commitchange.loadStylesheet();commitchange.appendMarkup()})}else{window.onload=function(){commitchange.loadStylesheet();commitchange.appendMarkup()}}if(document.querySelector(".commitchange-donate")){commitchange.loadStylesheet();commitchange.appendMarkup()}},{}]},{},[1]);
